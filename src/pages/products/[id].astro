---
import Product from "../../components/product.astro";
import type { Product as Typeproduct } from "../../types/product";

const { id } = Astro.params;

const response = await fetch(`https://fakestoreapi.com/products/${id}`);
const product = await response.json();

export async function getStaticPaths() {
  const res = await fetch(`https://fakestoreapi.com/products/`);
  const products = await res.json();

  const paths = products.map((product: Typeproduct) => ({
    params: { id: product.id.toString() },
  }));

  return paths;
}
---

<Product product={product} />
